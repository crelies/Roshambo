//
//  PlayerViewViewModelCreator.swift
//  Roshambo
//
//  Created Christian Elies on 24.04.19.
//  Copyright Â© 2019 Christian Elies. All rights reserved.
//
//  Template generated by Christian Elies @crelies
//

import UIKit

protocol PlayerViewViewModelCreatorProvider {
	var playerViewViewModelCreator: PlayerViewViewModelCreatorProtocol { get }
}

protocol PlayerViewViewModelCreatorProtocol {
    func createViewModel(forState state: PlayerViewState, isWinner: Bool, isDraw: Bool) -> PlayerViewViewModel
}

final class PlayerViewViewModelCreator {
	private let dependencies: PlayerViewViewModelCreatorDependenciesProtocol

	init(dependencies: PlayerViewViewModelCreatorDependenciesProtocol) {
		self.dependencies = dependencies
	}
}

extension PlayerViewViewModelCreator: PlayerViewViewModelCreatorProtocol {
    func createViewModel(forState state: PlayerViewState, isWinner: Bool, isDraw: Bool) -> PlayerViewViewModel {
        switch state {
            case .initial:
                return PlayerViewViewModel(isImageViewHidden: false,
                                           image: state.displayImage,
                                           sizeMultiplier: 1,
                                           areActionButtonsHidden: true)
            case .takeAction:
                return PlayerViewViewModel(isImageViewHidden: true,
                                           image: state.displayImage,
                                           sizeMultiplier: 1,
                                           areActionButtonsHidden: false)
            case .result:
                var sizeMultiplier: Float = 1
                if !isWinner && !isDraw {
                    sizeMultiplier = 0.7
                }
                return PlayerViewViewModel(isImageViewHidden: false,
                                           image: state.displayImage,
                                           sizeMultiplier: sizeMultiplier,
                                           areActionButtonsHidden: true)
        }
    }
}
